apiVersion: v1
kind: Secret
metadata:
  name: {{ include "fathuss.fullname" . }}-secrets
  labels:
    {{- include "fathuss.labels" . | nindent 4 }}
type: Opaque
data:
  # JWT secret - base64 encoded
  jwt-secret: {{ .Values.global.jwtSecret | default "eW91ci1zZWNyZXQta2V5" | b64enc }}

  # Database credentials
  database-url: {{ printf "postgresql://%s:%s@fathuss-postgresql:5432/%s" .Values.postgresql.auth.username .Values.postgresql.auth.password .Values.postgresql.auth.database | b64enc }}

  # ClickHouse password
  clickhouse-password: {{ .Values.clickhouse.env | toJson | fromJson | dig "CLICKHOUSE_PASSWORD" "password" | b64enc }}

  # WalletConnect Project ID
  walletconnect-project-id: {{ .Values.global.walletConnectProjectId | default "dGVzdC1wcm9qZWN0LWlk" | b64enc }}

  # RabbitMQ credentials
  rabbitmq-url: {{ printf "amqp://%s:%s@fathuss-rabbitmq:5672" .Values.rabbitmq.auth.username .Values.rabbitmq.auth.password | b64enc }}